{"version":3,"file":"static/js/46.6356d6ca.chunk.js","mappings":"8XAUA,MAsMA,EAnMwBA,IAAW,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EACjC,MAAMC,GAAWC,EAAAA,EAAAA,MAEXC,IADaC,EAAAA,EAAAA,IAAYC,EAAAA,KACfD,EAAAA,EAAAA,IAAYE,EAAAA,IACtBC,GAAWH,EAAAA,EAAAA,IAAYI,EAAAA,KACtBC,EAAMC,IAAWC,EAAAA,EAAAA,UAAS,IAC1BC,EAAUC,IAAeF,EAAAA,EAAAA,UAAS,GAEnCG,EAAgBA,KAOrB,GANAC,QAAQC,IAAI,UAAWb,GAMgC,OAARI,QAAQ,IAARA,IAAAA,EAAUU,UAAqB,OAARV,QAAQ,IAARA,IAAAA,EAAUW,UAAY,OAE5F,IAAIC,EAEJ,IACCA,EAAa,IAAIC,EAAAA,EAAe,CAC/BC,IAAKC,mCACLC,YAAa,CACZC,KAAa,OAARjB,QAAQ,IAARA,OAAQ,EAARA,EAAUU,WAAY,WAC3BQ,KAAa,OAARlB,QAAQ,IAARA,OAAQ,EAARA,EAAUW,aAAc,YAE9BQ,MAAO,YAET,CACA,MAAOC,GAWN,OAVAZ,QAAQa,MAAMD,QAEVf,GAAYiB,EACf5B,EAAS6B,EAAAA,GAAaC,YAAW,IAGjClB,GAAamB,GAAoBA,EAAkB,IAKrD,CAEAb,EACEc,aACAC,MAAMC,GAASlC,EAAS6B,EAAAA,GAAaC,WAAWK,EAAAA,GAAuB,IAAKD,KAASA,EAAKhC,cAC1FkC,OAAOV,GAAQ1B,EAAS6B,EAAAA,GAAaC,YAAW,KAAQ,EAyCrDO,EAAoBC,IACzB,MACMC,EAAQD,EAAY,IAG1B,MAJmB,CAAC,IAAK,KAAM,IAAK,KAAM,IAAK,KAAM,IAAK,MAE5CE,KAAKC,OAAOF,EAAQ,EAAIA,EAAQ,IAAMA,GAAS,IAAM,EAE3C,EAUzB,OAPAG,EAAAA,EAAAA,YAAU,KACT7B,IACAJ,EAAQkC,YAAY9B,EApGC,MAsGd,IAAM+B,cAAcpC,KACzB,IAEa,OAAZN,GAEF2C,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC9BC,EAAAA,EAAAA,KAACC,EAAAA,EAAmB,CAACH,UAAU,cAC/BE,EAAAA,EAAAA,KAAA,OACCF,UAAU,0BACV,aAAYX,EAAAA,GAAyB,sBAAsBY,SAC3D,2BAMY,IAAZ7C,GAEF2C,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iBAAgBC,SAAA,EAC9BC,EAAAA,EAAAA,KAACC,EAAAA,EAAuB,CAACH,UAAU,cACnCE,EAAAA,EAAAA,KAAA,OACCF,UAAU,0BACV,aAAYX,EAAAA,GAAyB,yBAAyBY,SAC9D,8BAOHF,EAAAA,EAAAA,MAAA,OAAKK,GAAG,UAASH,SAAA,EAChBF,EAAAA,EAAAA,MAAA,OAAKK,GAAG,cAAaH,SAAA,CAjFCI,KACvB,MAAML,EAAY,WAElB,OAAQK,GACP,IAAK,MACJ,OAAOH,EAAAA,EAAAA,KAACC,EAAAA,EAAQ,CAACH,UAAWA,IAC7B,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAc,CAACH,UAAWA,IACnC,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAa,CAACH,UAAWA,IAClC,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAc,CAACH,UAAWA,IACnC,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAU,CAACH,UAAWA,IAC/B,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAW,CAACH,UAAWA,IAChC,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAiB,CAACH,UAAWA,IACtC,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAmB,CAACH,UAAWA,IACxC,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAuB,CAACH,UAAWA,IAC5C,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAU,CAACH,UAAWA,IAC/B,IAAK,MACL,IAAK,MACJ,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAe,CAACH,UAAWA,IACpC,QACC,OAAOE,EAAAA,EAAAA,KAACC,EAAAA,EAAe,CAACH,UAAWA,IACrC,EA+CGM,CAAsB,OAAPlD,QAAO,IAAPA,GAAa,QAANd,EAAPc,EAASmD,YAAI,IAAAjE,OAAN,EAAPA,EAAekE,MAC/BT,EAAAA,EAAAA,MAAA,OAAKK,GAAG,eAAcH,SAAA,EACrBC,EAAAA,EAAAA,KAAA,OACCE,GAAG,eACHJ,UAAU,aACV,aAAYX,EAAAA,GAAyB,GAADoB,OAAIC,OAAc,OAAPtD,QAAO,IAAPA,GAAa,QAANb,EAAPa,EAASuD,YAAI,IAAApE,OAAN,EAAPA,EAAeqE,KAAKC,QAAQ,GAAE,SAAKZ,SAAA,GAAAQ,OAE9EC,OAAc,OAAPtD,QAAO,IAAPA,GAAa,QAANZ,EAAPY,EAASuD,YAAI,IAAAnE,OAAN,EAAPA,EAAeoE,KAAKC,QAAQ,GAAE,WAE1CX,EAAAA,EAAAA,KAAA,OACCE,GAAG,gBACHJ,UAAU,aACV,aAAYX,EAAAA,GAAyB,SAADoB,OAAUC,OAAc,OAAPtD,QAAO,IAAPA,GAAkB,QAAXX,EAAPW,EAAS0D,iBAAS,IAAArE,OAAX,EAAPA,EAAoBmE,KAAKC,QAAQ,GAAE,SAAKZ,SAAA,SAAAQ,OAEnFC,OAAc,OAAPtD,QAAO,IAAPA,GAAkB,QAAXV,EAAPU,EAAS0D,iBAAS,IAAApE,OAAX,EAAPA,EAAoBkE,KAAKC,QAAQ,GAAE,iBAKvDX,EAAAA,EAAAA,KAAA,OACCE,GAAG,sBACHJ,UAAU,aACV,aAAYX,EAAAA,GAAyBA,EAAAA,GAA2B,OAAPjC,QAAO,IAAPA,OAAO,EAAPA,EAAS2D,cAAcd,SAE/EZ,EAAAA,GAA2B,OAAPjC,QAAO,IAAPA,OAAO,EAAPA,EAAS2D,gBAG/BhB,EAAAA,EAAAA,MAAA,OAAKK,GAAG,iBAAgBH,SAAA,EACvBF,EAAAA,EAAAA,MAAA,OAAKK,GAAG,eAAcH,SAAA,EACb,OAAP7C,QAAO,IAAPA,GAAa,QAANT,EAAPS,EAASuD,YAAI,IAAAhE,OAAN,EAAPA,EAAeiE,KAAM,IAAKV,EAAAA,EAAAA,KAACC,EAAAA,EAAS,KAAMD,EAAAA,EAAAA,KAACC,EAAAA,EAAiB,KAE7DD,EAAAA,EAAAA,KAAA,QACCF,UAAU,aACV,aAAYX,EAAAA,GAAyB,GAADoB,QAAW,OAAPrD,QAAO,IAAPA,GAAa,QAANR,EAAPQ,EAASuD,YAAI,IAAA/D,OAAN,EAAPA,EAAegE,KAAM,GAAY,OAAPxD,QAAO,IAAPA,OAAO,EAAPA,EAAS4D,KAAc,OAAP5D,QAAO,IAAPA,OAAO,EAAPA,EAAS6D,KAAI,MAAKhB,SAAA,GAAAQ,QAEzF,OAAPrD,QAAO,IAAPA,GAAa,QAANP,EAAPO,EAASuD,YAAI,IAAA9D,OAAN,EAAPA,EAAe+D,KAAM,GAAY,OAAPxD,QAAO,IAAPA,OAAO,EAAPA,EAAS4D,KAAc,OAAP5D,QAAO,IAAPA,OAAO,EAAPA,EAAS6D,KAAI,WAI7DlB,EAAAA,EAAAA,MAAA,OAAKK,GAAG,eAAcH,SAAA,EACrBC,EAAAA,EAAAA,KAACC,EAAAA,EAAS,KAEVD,EAAAA,EAAAA,KAAA,QACCF,UAAU,aACV,aAAYX,EAAAA,GAAyB,GAADoB,OAChCf,KAAKC,MAAa,OAAPvC,QAAO,IAAPA,GAAa,QAANN,EAAPM,EAAS8D,YAAI,IAAApE,OAAN,EAAPA,EAAeqE,OAAM,KAAAV,OAAIlB,EAAwB,OAAPnC,QAAO,IAAPA,GAAa,QAANL,EAAPK,EAAS8D,YAAI,IAAAnE,OAAN,EAAPA,EAAeqE,OACtEnB,SAAA,GAAAQ,OAEEf,KAAKC,MAAa,OAAPvC,QAAO,IAAPA,GAAa,QAANJ,EAAPI,EAAS8D,YAAI,IAAAlE,OAAN,EAAPA,EAAemE,OAAM,KAAAV,OAAIlB,EAAwB,OAAPnC,QAAO,IAAPA,GAAa,QAANH,EAAPG,EAAS8D,YAAI,IAAAjE,OAAN,EAAPA,EAAemE,YAI1ErB,EAAAA,EAAAA,MAAA,OAAKK,GAAG,aAAYH,SAAA,EACnBC,EAAAA,EAAAA,KAACC,EAAAA,EAAY,KAEbD,EAAAA,EAAAA,KAAA,QAAMF,UAAU,aAAa,aAAYX,EAAAA,GAAyBgC,OAAO3B,KAAKC,OAAa,OAAPvC,QAAO,IAAPA,OAAO,EAAPA,EAASkE,MAAO,KAAKrB,SACvGP,KAAKC,OAAa,OAAPvC,QAAO,IAAPA,OAAO,EAAPA,EAASkE,MAAO,aAI1B,EC1MR,G","sources":["pages/Weather/Weather.jsx","pages/Weather/index.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport OpenWeatherAPI from 'openweather-api-node';\nimport * as Icon from 'react-bootstrap-icons';\nimport * as Utility from '../../scripts/utility';\nimport storeActions from '../../store/store.redux';\nimport { selectGPSState, selectTimestampState, selectWeatherState } from '../../store/store.selectors';\n\nimport '../../css/weather.css';\n\nconst updateInterval = 900000; // 15 minutes\nconst failureTolerance = 5;\n\nexport const Weather = (props) => {\n\tconst dispatch = useDispatch();\n\tconst timestamps = useSelector(selectTimestampState);\n\tconst weather = useSelector(selectWeatherState);\n\tconst location = useSelector(selectGPSState);\n\tconst [loop, setLoop] = useState(0);\n\tconst [failures, setFailures] = useState(0);\n\n\tconst updateWeather = () => {\n\t\tconsole.log('WEATHER', weather);\n\t\tif (!process.env.REACT_APP_OPEN_WEATHER_API_KEY) {\n\t\t\tdispatch(storeActions.setWeather(false));\n\t\t\treturn;\n\t\t}\n\n\t\tif (process.env.NODE_ENV === 'production' && (!location?.latitude || !location?.longitude)) return;\n\n\t\tlet weatherAPI;\n\n\t\ttry {\n\t\t\tweatherAPI = new OpenWeatherAPI({\n\t\t\t\tkey: process.env.REACT_APP_OPEN_WEATHER_API_KEY,\n\t\t\t\tcoordinates: {\n\t\t\t\t\tlat: location?.latitude || 29.1164897,\n\t\t\t\t\tlon: location?.longitude || -81.0270001,\n\t\t\t\t},\n\t\t\t\tunits: 'imperial',\n\t\t\t});\n\t\t}\n\t\tcatch (err) {\n\t\t\tconsole.error(err);\n\n\t\t\tif (failures >= failureTolerance - 1) {\n\t\t\t\tdispatch(storeActions.setWeather(false));\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsetFailures((currentFailures) => currentFailures + 1);\n\t\t\t\t// setLoop(setTimeout(updateWeather, 5000)); // 5 seconds\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tweatherAPI\n\t\t\t.getCurrent()\n\t\t\t.then((data) => dispatch(storeActions.setWeather(Utility.serializeDates({ ...data, ...data.weather }))))\n\t\t\t.catch((err) => dispatch(storeActions.setWeather(false)));\n\t};\n\n\tconst getWeatherIcon = (code) => {\n\t\tconst className = 'big-icon';\n\n\t\tswitch (code) {\n\t\t\tcase '01d':\n\t\t\t\treturn <Icon.Sun className={className} />;\n\t\t\tcase '01n':\n\t\t\t\treturn <Icon.MoonStars className={className} />;\n\t\t\tcase '02d':\n\t\t\t\treturn <Icon.CloudSun className={className} />;\n\t\t\tcase '02n':\n\t\t\t\treturn <Icon.CloudMoon className={className} />;\n\t\t\tcase '03d':\n\t\t\tcase '03n':\n\t\t\t\treturn <Icon.Cloud className={className} />;\n\t\t\tcase '04d':\n\t\t\tcase '04n':\n\t\t\t\treturn <Icon.Clouds className={className} />;\n\t\t\tcase '09d':\n\t\t\tcase '09n':\n\t\t\t\treturn <Icon.CloudDrizzle className={className} />;\n\t\t\tcase '10d':\n\t\t\tcase '10n':\n\t\t\t\treturn <Icon.CloudRainHeavy className={className} />;\n\t\t\tcase '11d':\n\t\t\tcase '11n':\n\t\t\t\treturn <Icon.CloudLightningRain className={className} />;\n\t\t\tcase '13d':\n\t\t\tcase '13n':\n\t\t\t\treturn <Icon.Snow2 className={className} />;\n\t\t\tcase '50d':\n\t\t\tcase '50n':\n\t\t\t\treturn <Icon.CloudHaze2 className={className} />;\n\t\t\tdefault:\n\t\t\t\treturn <Icon.QuestionLg className={className} />;\n\t\t}\n\t};\n\n\tconst degreesToCompass = (direction) => {\n\t\tconst directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];\n\t\tconst angle = direction % 360;\n\t\tconst index = Math.round((angle < 0 ? angle + 360 : angle) / 45) % 8;\n\n\t\treturn directions[index];\n\t};\n\n\tuseEffect(() => {\n\t\tupdateWeather();\n\t\tsetLoop(setInterval(updateWeather, updateInterval));\n\n\t\treturn () => clearInterval(loop);\n\t}, []);\n\n\tif (weather === null)\n\t\treturn (\n\t\t\t<div className=\"loading-screen\">\n\t\t\t\t<Icon.CloudArrowDown className=\"big-icon\" />\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"loading-text show-unlit\"\n\t\t\t\t\tdata-unlit={Utility.generateUnlitLCD('Weather loading...')}\n\t\t\t\t>\n\t\t\t\t\tWeather loading...\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\tif (weather === false)\n\t\treturn (\n\t\t\t<div className=\"loading-screen\">\n\t\t\t\t<Icon.ExclamationDiamond className=\"big-icon\" />\n\t\t\t\t<div\n\t\t\t\t\tclassName=\"loading-text show-unlit\"\n\t\t\t\t\tdata-unlit={Utility.generateUnlitLCD('Error loading weather')}\n\t\t\t\t>\n\t\t\t\t\tError loading weather\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\treturn (\n\t\t<div id=\"weather\">\n\t\t\t<div id=\"weather-top\">\n\t\t\t\t{getWeatherIcon(weather?.icon?.raw)}\n\t\t\t\t<div id=\"weather-main\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"weather-temp\"\n\t\t\t\t\t\tclassName=\"show-unlit\"\n\t\t\t\t\t\tdata-unlit={Utility.generateUnlitLCD(`${Number(weather?.temp?.cur).toFixed(0)}째`)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${Number(weather?.temp?.cur).toFixed(0)}째`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tid=\"weather-feels\"\n\t\t\t\t\t\tclassName=\"show-unlit\"\n\t\t\t\t\t\tdata-unlit={Utility.generateUnlitLCD(`Feels ${Number(weather?.feelsLike?.cur).toFixed(0)}째`)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`Feels ${Number(weather?.feelsLike?.cur).toFixed(0)}째`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tid=\"weather-description\"\n\t\t\t\tclassName=\"show-unlit\"\n\t\t\t\tdata-unlit={Utility.generateUnlitLCD(Utility.toTitleCase(weather?.description))}\n\t\t\t>\n\t\t\t\t{Utility.toTitleCase(weather?.description)}\n\t\t\t</div>\n\n\t\t\t<div id=\"weather-bottom\">\n\t\t\t\t<div id=\"weather-rain\">\n\t\t\t\t\t{weather?.temp?.cur < 32 ? <Icon.Snow /> : <Icon.UmbrellaFill />}\n\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"show-unlit\"\n\t\t\t\t\t\tdata-unlit={Utility.generateUnlitLCD(`${weather?.temp?.cur < 32 ? weather?.snow : weather?.rain}\"`)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${weather?.temp?.cur < 32 ? weather?.snow : weather?.rain}\"`}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div id=\"weather-wind\">\n\t\t\t\t\t<Icon.Wind />\n\n\t\t\t\t\t<span\n\t\t\t\t\t\tclassName=\"show-unlit\"\n\t\t\t\t\t\tdata-unlit={Utility.generateUnlitLCD(\n\t\t\t\t\t\t\t`${Math.round(weather?.wind?.speed)} ${degreesToCompass(weather?.wind?.deg)}`,\n\t\t\t\t\t\t)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{`${Math.round(weather?.wind?.speed)} ${degreesToCompass(weather?.wind?.deg)}`}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\n\t\t\t\t<div id=\"weather-uv\">\n\t\t\t\t\t<Icon.SunFill />\n\n\t\t\t\t\t<span className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD(String(Math.round(weather?.uvi || 0)))}>\n\t\t\t\t\t\t{Math.round(weather?.uvi || 0)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Weather;\n","import Weather from './Weather';\n\nexport default Weather;\n"],"names":["props","_weather$icon","_weather$temp","_weather$temp2","_weather$feelsLike","_weather$feelsLike2","_weather$temp3","_weather$temp4","_weather$temp5","_weather$wind","_weather$wind2","_weather$wind3","_weather$wind4","dispatch","useDispatch","weather","useSelector","selectTimestampState","selectWeatherState","location","selectGPSState","loop","setLoop","useState","failures","setFailures","updateWeather","console","log","latitude","longitude","weatherAPI","OpenWeatherAPI","key","process","coordinates","lat","lon","units","err","error","failureTolerance","storeActions","setWeather","currentFailures","getCurrent","then","data","Utility","catch","degreesToCompass","direction","angle","Math","round","useEffect","setInterval","clearInterval","_jsxs","className","children","_jsx","Icon","id","code","getWeatherIcon","icon","raw","concat","Number","temp","cur","toFixed","feelsLike","description","snow","rain","wind","speed","deg","String","uvi"],"sourceRoot":""}