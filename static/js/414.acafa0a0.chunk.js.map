{"version":3,"file":"static/js/414.acafa0a0.chunk.js","mappings":"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","sources":["components/Confirm.jsx","components/Location.jsx","pages/Performance/Performance.jsx","pages/Performance/index.js","../node_modules/react-bootstrap-icons/dist/icons/pin-map.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport * as Utility from '../scripts/utility';\n\nimport '../css/modal.css';\n\nconst failureTolerance = 5;\nconst gyroscope = null;\n\nexport const Modal = ({ children, onConfirm, onCancel, ...props }) => (\n\t// useEffect(updatePosition, []);\n\n\t<div id=\"confirm\">\n\t\t<div id=\"confirm-modal\">\n\t\t\t{children}\n\t\t\t<div id=\"confirm-buttons\">\n\t\t\t\t<div id=\"performance-buttons\">\n\t\t\t\t\t<button type=\"button\" onClick={onConfirm}>\n\t\t\t\t\t\tConfirm\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"button\" onClick={onCancel}>\n\t\t\t\t\t\tCancel\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n);\n\nModal.propTypes = {\n\tchildren: PropTypes.node,\n\tonConfirm: PropTypes.func.isRequired,\n\tonCancel: PropTypes.func.isRequired,\n};\n\nModal.defaultProps = {\n\tchildren: null,\n};\n\nexport default Modal;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useDispatch } from 'react-redux';\nimport Confirm from './Confirm';\nimport * as Utility from '../scripts/utility';\nimport storeActions from '../store/store.redux';\n\nconst failureTolerance = 3;\nconst validMethods = ['geolocation'];\n\n// if (process.env.REACT_APP_GPSD_SERVER_URL) validMethods.unshift('gpsd');\n\nexport const Location = ({ interval = 1000, ...props }) => {\n\tconst dispatch = useDispatch();\n\tconst [method, setMethod] = useState(validMethods[0]);\n\tconst [failedMethods, setFailedMethods] = useState([]);\n\tconst [permitted, setPermitted] = useState(false);\n\tconst [confirmed, setConfirmed] = useState(true);\n\tconst [failures, setFailures] = useState(0);\n\n\tconst dataFailure = (err, forceNext) => {\n\t\tconsole.log('Failure', method, failures, failureTolerance, forceNext, new Date().toLocaleTimeString());\n\n\t\tsetFailures((currentFailures) => {\n\t\t\tif (currentFailures >= failureTolerance - 1 || forceNext) {\n\t\t\t\tsetMethod((currentMethod) => {\n\t\t\t\t\tconst newMethod = validMethods.find((m) => !failedMethods.includes(m) && m !== currentMethod);\n\n\t\t\t\t\tif (!newMethod) return currentMethod;\n\n\t\t\t\t\tconsole.log(`Changing location method to ${newMethod}`);\n\t\t\t\t\tsetFailedMethods((currentFailedMethods) => [...currentFailedMethods, currentMethod]);\n\t\t\t\t\treturn newMethod;\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.log(`Failed to get location via ${method}`);\n\t\t\t\tconsole.error(err);\n\t\t\t\treturn currentFailures + 1;\n\t\t\t}\n\n\t\t\treturn currentFailures;\n\t\t});\n\t};\n\n\tconst cleanupGPSData = (response) => ({\n\t\tlatitude: response.lat,\n\t\tlongitude: response.lon,\n\t\taltitude: Utility.metersToFeet(response.alt),\n\t\theading: response.track,\n\t\tclimb: response.climb,\n\t\ttilt: 0,\n\t\tspeed: Utility.mpsToMPH(response.speed),\n\t\taccuracy: Utility.metersToFeet(Math.max(response.epx, response.epy)),\n\t\taltitudeAccuracy: Utility.metersToFeet(response.epv),\n\t\tmethod,\n\t});\n\n\tconst cleanupGeolocationData = (location) => ({\n\t\tlatitude: location.coords.latitude,\n\t\tlongitude: location.coords.longitude,\n\t\taltitude: Utility.metersToFeet(location.coords.altitude),\n\t\theading: location.coords.heading,\n\t\tclimb: 0,\n\t\ttilt: 0,\n\t\tspeed: Utility.mpsToMPH(location.coords.speed),\n\t\taccuracy: Utility.metersToFeet(location.coords.accuracy),\n\t\taltitudeAccuracy: Utility.metersToFeet(location.coords.altitudeAccuracy),\n\t\tmethod,\n\t});\n\n\tconst getDataFromGPSD = () => {\n\t\tfetch(`${process.env.REACT_APP_GPSD_SERVER_URL}/gps`)\n\t\t\t.then((response) => response.json())\n\t\t\t.then(cleanupGPSData)\n\t\t\t.then((data) => dispatch(storeActions.setGPS(data)))\n\t\t\t.then(() => setTimeout(updateLocation, interval, method))\n\t\t\t.catch(dataFailure);\n\t};\n\n\tconst getDataFromGeolocation = () => {\n\t\tif (navigator?.permissions?.query) {\n\t\t\tnavigator.permissions\n\t\t\t\t.query({ name: 'geolocation' })\n\t\t\t\t.then((permission) => {\n\t\t\t\t\tif (permission.state === 'granted' || permission.state === 'prompt') {\n\t\t\t\t\t\tsetPermitted(true);\n\t\t\t\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t\t\t\t(location) => {\n\t\t\t\t\t\t\t\tdispatch(storeActions.setGPS(cleanupGeolocationData(location)));\n\t\t\t\t\t\t\t\tsetTimeout(updateLocation, interval);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdataFailure,\n\t\t\t\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tsetConfirmed(false);\n\t\t\t\t\t\tdataFailure('Geolocation API permission denied by system');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tif (!permitted) setConfirmed(false);\n\t\t\t\t\telse dataFailure(err);\n\t\t\t\t});\n\t\t}\n\t\telse if (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\t\t(location) => {\n\t\t\t\t\tdispatch(storeActions.setGPS(cleanupGeolocationData(location)));\n\t\t\t\t\tsetTimeout(updateLocation, interval);\n\t\t\t\t},\n\t\t\t\tdataFailure,\n\t\t\t\t{ enableHighAccuracy: true },\n\t\t\t);\n\t\t}\n\t};\n\n\tconst updateLocation = (currentMethod = method) => {\n\t\tif (currentMethod === 'gpsd') getDataFromGPSD();\n\t\tif (currentMethod === 'geolocation') getDataFromGeolocation();\n\t};\n\n\t// useEffect(() => {\n\t// \tconsole.log(`Setting timeout from ${new Date().toLocaleTimeString()} - ${failures}/${method}/${failedMethods}`);\n\t// \tsetTimeout(() => updateLocation(method), interval)\n\t// }, [failures]);\n\n\tuseEffect(() => setFailures(0), [method]);\n\n\tuseEffect(() => updateLocation(method), []);\n\n\tif (method === 'geolocation' && !permitted && !confirmed)\n\t\treturn (\n\t\t\t<Confirm\n\t\t\t\tonConfirm={() => {\n\t\t\t\t\tsetConfirmed(true);\n\t\t\t\t\tupdateLocation();\n\t\t\t\t}}\n\t\t\t\tonCancel={() => {\n\t\t\t\t\tsetConfirmed(true);\n\t\t\t\t\tdataFailure('Geolocation API permission denied by user', true);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<span className=\"show-unlit\" data-unlit={Utility.fillUnlitLCD(3, 20)}>\n\t\t\t\t\tYou must grant permission to access GPS.\n\t\t\t\t</span>\n\t\t\t</Confirm>\n\t\t);\n\n\treturn null;\n};\n\nLocation.propTypes = {\n\tinterval: PropTypes.number,\n\tonUpdate: PropTypes.func.isRequired,\n};\n\nLocation.defaultProps = {\n\tinterval: 1000,\n};\n\nexport default Location;\n","import React, { useEffect, useState } from 'react';\nimport * as Icon from 'react-bootstrap-icons';\nimport Location from '../../components/Location';\nimport * as Utility from '../../scripts/utility';\n\nimport '../../css/performance.css';\n\nconst resolution = 100; // 100 milliseconds\n\nexport const Performance = (props) => {\n\tconst [time, setTime] = useState(new Date());\n\tconst [speed, setSpeed] = useState(0);\n\tconst [run, setRun] = useState({ start: null, end: null, topSpeed: null, to60: null, times: [], speeds: [] });\n\n\tconst updateTime = () => setTime(new Date());\n\n\tconst logTime = () => {\n\t\tsetRun((currentRun) => {\n\t\t\tif (currentRun.end) return { ...currentRun };\n\n\t\t\tconst now = Date.now();\n\t\t\tsetTimeout(logTime, resolution);\n\n\t\t\treturn {\n\t\t\t\t...currentRun,\n\t\t\t\tstart: currentRun.start || now,\n\t\t\t\ttopSpeed: Math.max(speed, currentRun.topSpeed),\n\t\t\t\tto60: speed >= 60 && !currentRun.to60 ? speed : currentRun.to60,\n\t\t\t\t// times: [...currentRun.times, now],\n\t\t\t\t// speeds: [...currentRun.speeds, currentSpeed || 0]\n\t\t\t};\n\t\t});\n\t};\n\n\tconst endTimer = () => setRun((currentRun) => ({ ...currentRun, end: Date.now() }));\n\n\tconst restartTimer = () => {\n\t\tsetRun((currentRun) => ({ ...currentRun, end: null }));\n\t\tlogTime();\n\t};\n\n\tconst resetTimer = () => setRun({ start: null, end: null, topSpeed: null, to60: null, times: [], speeds: [] });\n\n\tconst getCurrentSpeed = () => String(Math.floor(speed || 0)).padStart(3, '0');\n\n\tconst getTopSpeed = () => String(Math.floor(run.topSpeed || 0)).padStart(3, '0');\n\n\tconst getAcceleration = () => (run.to60 ? `${run.to60.toFixed(2)} s` : 'N/A');\n\n\tconst getDisplayTime = () => {\n\t\tconst now = Date.now();\n\t\tconst duration = (run.end || now) - (run.start || now);\n\t\tconst minutes = String(Math.floor(duration / 1000 / 60) || 0).padStart(2, '0');\n\t\tconst seconds = String(Math.floor((duration / 1000) % 60) || 0).padStart(2, '0');\n\t\tconst milliseconds = String(duration % 1000 || 0).padStart(3, '0');\n\n\t\treturn `${minutes}:${seconds}.${milliseconds}`;\n\t};\n\n\tuseEffect(() => {\n\t\tconst interval = setInterval(updateTime, 1000); // 1 second\n\n\t\treturn () => clearInterval(interval);\n\t}, []);\n\n\tif (!speed && speed !== 0)\n\t\treturn (\n\t\t\t<div id=\"weather\">\n\t\t\t\t<Location onUpdate={(location) => setSpeed(location?.speed)} />\n\t\t\t\t<Icon.PinMap className=\"big-icon\" />\n\t\t\t\t<div id=\"weather-description\">Error getting location</div>\n\t\t\t</div>\n\t\t);\n\n\treturn (\n\t\t<div id=\"performance\">\n\t\t\t<Location onUpdate={(location) => setSpeed(location?.speed)} />\n\t\t\t<div id=\"performance-speed\" className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD(getCurrentSpeed())}>\n\t\t\t\t{getCurrentSpeed()}\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div id=\"performance-stats\">\n\t\t\t\t<div>\n\t\t\t\t\t<span className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD(`${getTopSpeed()} mph`)}>\n\t\t\t\t\t\t{getTopSpeed()} mph\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD('Top Spd')}>\n\t\t\t\t\t\tTop Spd\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD(getAcceleration())}>\n\t\t\t\t\t\t{getAcceleration()}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD('00 - 60')}>\n\t\t\t\t\t\t00 - 60\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t{/* <div>\n\t\t\t\t\t<span>1.2 G</span>\n\t\t\t\t\t<span>Top Acc</span>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<span>12.3 s</span>\n\t\t\t\t\t<span>0-120</span>\n\t\t\t\t</div> */}\n\t\t\t</div>\n\t\t\t<hr />\n\t\t\t<div id=\"performance-timer\" className=\"show-unlit\" data-unlit={Utility.generateUnlitLCD(getDisplayTime(), [':'])}>\n\t\t\t\t{getDisplayTime()}\n\t\t\t</div>\n\t\t\t<div id=\"performance-buttons\">\n\t\t\t\t{run.start && !run.end ? (\n\t\t\t\t\t<button type=\"button\" onClick={endTimer}>\n\t\t\t\t\t\tStop\n\t\t\t\t\t</button>\n\t\t\t\t) : (\n\t\t\t\t\t<button type=\"button\" onClick={run.end ? restartTimer : logTime}>\n\t\t\t\t\t\tStart\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t<button type=\"button\" onClick={resetTimer}>\n\t\t\t\t\tReset\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Performance;\n","import Performance from './Performance';\n\nexport default Performance;","var _excluded = [\"color\", \"size\", \"title\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar PinMap = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var color = _ref.color,\n      size = _ref.size,\n      title = _ref.title,\n      rest = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 16 16\",\n    width: size,\n    height: size,\n    fill: color\n  }, rest), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z\"\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    fillRule: \"evenodd\",\n    d: \"M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z\"\n  }));\n});\nPinMap.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  title: PropTypes.string\n};\nPinMap.defaultProps = {\n  color: 'currentColor',\n  size: '1em',\n  title: null\n};\nexport default PinMap;"],"names":["Modal","_ref","children","onConfirm","onCancel","props","_jsx","id","_jsxs","type","onClick","defaultProps","validMethods","Location","interval","dispatch","useDispatch","method","setMethod","useState","failedMethods","setFailedMethods","permitted","setPermitted","confirmed","setConfirmed","failures","setFailures","dataFailure","err","forceNext","console","log","Date","toLocaleTimeString","currentFailures","failureTolerance","currentMethod","newMethod","find","m","includes","concat","currentFailedMethods","error","cleanupGPSData","response","latitude","lat","longitude","lon","altitude","Utility","alt","heading","track","climb","tilt","speed","accuracy","Math","max","epx","epy","altitudeAccuracy","epv","cleanupGeolocationData","location","coords","updateLocation","arguments","length","undefined","fetch","process","then","json","data","storeActions","setGPS","setTimeout","catch","getDataFromGeolocation","_navigator","_navigator$permission","navigator","permissions","query","name","permission","state","geolocation","getCurrentPosition","enableHighAccuracy","useEffect","Confirm","className","time","setTime","setSpeed","run","setRun","start","end","topSpeed","to60","times","speeds","updateTime","logTime","currentRun","now","getCurrentSpeed","String","floor","padStart","getTopSpeed","getAcceleration","toFixed","getDisplayTime","duration","minutes","seconds","milliseconds","setInterval","clearInterval","onUpdate","endTimer","restartTimer","resetTimer","Icon","_excluded","_extends","Object","assign","target","i","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","PinMap","forwardRef","ref","color","size","title","rest","React","xmlns","viewBox","width","height","fill","fillRule","d","propTypes","PropTypes"],"sourceRoot":""}