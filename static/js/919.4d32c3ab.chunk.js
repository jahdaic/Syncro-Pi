"use strict";(self.webpackChunksyncro_pi=self.webpackChunksyncro_pi||[]).push([[919],{534:(e,t,o)=>{o.d(t,{Z:()=>l});o(2791);var n=o(3329);const i=e=>{let{children:t,onConfirm:o,onCancel:i,...l}=e;return(0,n.jsx)("div",{id:"confirm",children:(0,n.jsxs)("div",{id:"confirm-modal",children:[t,(0,n.jsx)("div",{id:"confirm-buttons",children:(0,n.jsxs)("div",{id:"performance-buttons",children:[(0,n.jsx)("button",{type:"button",onClick:o,children:"Confirm"}),(0,n.jsx)("button",{type:"button",onClick:i,children:"Cancel"})]})})]})})};i.defaultProps={children:null};const l=i},814:(e,t,o)=>{o.d(t,{Z:()=>c});var n=o(2791),i=o(534),l=o(8978),a=o(3329);let r=null;const s=e=>{let{interval:t=1,onUpdate:o,...s}=e;const[c,d]=(0,n.useState)("orientation"),[u,g]=(0,n.useState)(!1),[m,v]=(0,n.useState)(!0),[p,h]=(0,n.useState)(0),f=e=>{h((e=>e+1)),console.log("Failed to get position via ".concat(c)),console.error(e.type)},y=e=>({heading:e.z,climb:e.y,tilt:e.x,method:c}),x=e=>({heading:e.webkitCompassHeading||e.alpha,climb:e.beta,tilt:e.gamma,method:c,failures:p}),b=()=>{"orientation"===c&&(DeviceMotionEvent.requestPermission?DeviceMotionEvent.requestPermission().then((e=>{"granted"===e?(g(!0),window.addEventListener("deviceorientation",(e=>o(x(e))),{})):(v(!1),f("Device Motion API permission denied"))})).catch((e=>{e.name.includes("NotAllowedError")&&v(!1),f(e)})):window.addEventListener("deviceorientation",(e=>o(x(e))))),"gyroscope"===c&&(()=>{var e,n;null!==(e=navigator)&&void 0!==e&&null!==(n=e.permissions)&&void 0!==n&&n.query?navigator.permissions.query({name:"gyroscope"}).then((e=>{"granted"===e.state||"prompt"===e.state?(console.log("Permission granted"),r=new window.Gyroscope({frequency:t}),r.addEventListener("reading",(e=>{o(y(r)),console.log("Angular velocity along the X-axis ".concat(r.x)),console.log("Angular velocity along the Y-axis ".concat(r.y)),console.log("Angular velocity along the Z-axis ".concat(r.z))})),r.start()):f("Gyroscope API permission denied")})).catch(f):window.Gyroscope&&(console.log("Permission not granted"),r=new window.Gyroscope({frequency:t}),r.addEventListener("reading",(e=>{o(y(r)),console.log("Angular velocity along the X-axis ".concat(r.x)),console.log("Angular velocity along the Y-axis ".concat(r.y)),console.log("Angular velocity along the Z-axis ".concat(r.z))})),r.start())})()};return(0,n.useEffect)(b,[]),u||m?null:(0,a.jsx)(i.Z,{onConfirm:()=>{v(!0),b()},onCancel:()=>{v(!0)},children:(0,a.jsx)("span",{className:"show-unlit","data-unlit":l.jB(3,20),children:"You must grant permission to access the gyroscope."})})};s.defaultProps={interval:1};const c=s},5199:(e,t,o)=>{o.d(t,{Z:()=>u});var n=o(2791),i=o(4420),l=o(534),a=o(8978),r=o(3721),s=o(3329);const c=["geolocation"],d=e=>{let{interval:t=1e3,...o}=e;const d=(0,i.I0)(),[u,g]=(0,n.useState)(c[0]),[m,v]=(0,n.useState)([]),[p,h]=(0,n.useState)(!1),[f,y]=(0,n.useState)(!0),[x,b]=(0,n.useState)(0),w=(e,t)=>{console.log("Failure",u,x,3,t,(new Date).toLocaleTimeString()),b((o=>o>=2||t?(g((e=>{const t=c.find((t=>!m.includes(t)&&t!==e));return t?(console.log("Changing location method to ".concat(t)),v((t=>[...t,e])),t):e})),o):(console.log("Failed to get location via ".concat(u)),console.error(e),o+1)))},j=e=>({latitude:e.lat,longitude:e.lon,altitude:a.AD(e.alt),heading:e.track,climb:e.climb,tilt:0,speed:a.Li(e.speed),accuracy:a.AD(Math.max(e.epx,e.epy)),altitudeAccuracy:a.AD(e.epv),method:u}),P=e=>({latitude:e.coords.latitude,longitude:e.coords.longitude,altitude:a.AD(e.coords.altitude),heading:e.coords.heading,climb:0,tilt:0,speed:a.Li(e.coords.speed),accuracy:a.AD(e.coords.accuracy),altitudeAccuracy:a.AD(e.coords.altitudeAccuracy),method:u}),E=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u;"gpsd"===e&&fetch("".concat("https://192.168.50.22:3443","/gps")).then((e=>e.json())).then(j).then((e=>d(r.ZP.setGPS(e)))).then((()=>setTimeout(E,t,u))).catch(w),"geolocation"===e&&(()=>{var e,o;null!==(e=navigator)&&void 0!==e&&null!==(o=e.permissions)&&void 0!==o&&o.query?navigator.permissions.query({name:"geolocation"}).then((e=>{"granted"===e.state||"prompt"===e.state?(h(!0),navigator.geolocation.getCurrentPosition((e=>{d(r.ZP.setGPS(P(e))),setTimeout(E,t)}),w,{enableHighAccuracy:!0})):(y(!1),w("Geolocation API permission denied by system"))})).catch((e=>{p?w(e):y(!1)})):navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{d(r.ZP.setGPS(P(e))),setTimeout(E,t)}),w,{enableHighAccuracy:!0})})()};return(0,n.useEffect)((()=>b(0)),[u]),(0,n.useEffect)((()=>E(u)),[]),"geolocation"!==u||p||f?null:(0,s.jsx)(l.Z,{onConfirm:()=>{y(!0),E()},onCancel:()=>{y(!0),w("Geolocation API permission denied by user",!0)},children:(0,s.jsx)("span",{className:"show-unlit","data-unlit":a.jB(3,20),children:"You must grant permission to access GPS."})})};d.defaultProps={interval:1e3};const u=d},7919:(e,t,o)=>{o.r(t),o.d(t,{default:()=>f});var n=o(2791),i=o(2007),l=o.n(i),a=["color","size","title"];function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r.apply(this,arguments)}function s(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var c=(0,n.forwardRef)((function(e,t){var o=e.color,i=e.size,l=e.title,c=s(e,a);return n.createElement("svg",r({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:o},c),l?n.createElement("title",null,l):null,n.createElement("path",{d:"M8 16.016a7.5 7.5 0 0 0 1.962-14.74A1 1 0 0 0 9 0H7a1 1 0 0 0-.962 1.276A7.5 7.5 0 0 0 8 16.016zm6.5-7.5a6.5 6.5 0 1 1-13 0 6.5 6.5 0 0 1 13 0z"}),n.createElement("path",{d:"m6.94 7.44 4.95-2.83-2.83 4.95-4.949 2.83 2.828-4.95z"}))}));c.propTypes={color:l().string,size:l().oneOfType([l().string,l().number]),title:l().string},c.defaultProps={color:"currentColor",size:"1em",title:null};const d=c;var u=o(7830),g=o(4420),m=(o(5199),o(814)),v=o(8978),p=o(1930),h=o(3329);const f=e=>{const t=(0,g.v9)(p.$2),o=(0,g.v9)(p.RJ),[i,l]=(0,n.useState)(null),a=()=>{var e,t,o,n,i,l;const a=null===(e=document.getElementById("compass-coordinates"))||void 0===e?void 0:e.clientHeight,r=null===(t=document.getElementById("compass-positioning"))||void 0===t?void 0:t.clientHeight,s=null===(o=document.getElementById("top"))||void 0===o?void 0:o.clientHeight,c=null===(n=document.getElementById("bottom"))||void 0===n?void 0:n.clientHeight,d=null===(i=document.getElementById("content"))||void 0===i?void 0:i.clientHeight,u=null===(l=document.getElementById("content"))||void 0===l?void 0:l.clientWidth;return Math.min(d-s-c-r-a,u)},r=()=>{if(null===o||void 0===o||!o.latitude)return"";const e=(null===o||void 0===o?void 0:o.latitude)>=0?"N":"S",t=Math.abs(null===o||void 0===o?void 0:o.latitude).toFixed(3);return"".concat(t,"\xb0 ").concat(e)},s=()=>{if(null===o||void 0===o||!o.longitude)return"";const e=(null===o||void 0===o?void 0:o.latitude)>=0?"E":"W",t=Math.abs(null===o||void 0===o?void 0:o.longitude).toFixed(3);return"".concat(t,"\xb0 ").concat(e)},c=()=>{const e="imperial"===t.units?"ft":"m",n=Math.floor((null===o||void 0===o?void 0:o.altitude)||0);let i=n<0?3:4;return"m"===e&&i++,"".concat(n<0?"-":"").concat(String(Math.abs(n)).padStart(i,"0")," ").concat(e)},f=()=>{const e="imperial"===t.units?"mph":"km/h",n=Math.floor((null===o||void 0===o?void 0:o.speed)||0);let i=n<0?2:3;return"m"===e&&i--,"".concat(n<0?"-":"").concat(String(Math.abs(n)).padStart(i,"0")," ").concat(e)};return console.log("GPS",o),null===o?(0,h.jsxs)("div",{className:"loading-screen",children:[(0,h.jsx)(d,{className:"big-icon"}),(0,h.jsx)("div",{id:"weather-description",className:"show-unlit","data-unlit":v.ro("Compass loading..."),children:"Compass loading..."})]}):-1===o?(0,h.jsxs)("div",{className:"loading-screen",children:[(0,h.jsx)(u.Z,{className:"big-icon"}),(0,h.jsx)("div",{id:"weather-description",className:"show-unlit","data-unlit":v.ro("Error getting location"),children:"Error getting location"})]}):(0,h.jsxs)("div",{id:"compass",children:[(0,h.jsx)(m.Z,{onUpdate:l}),(0,h.jsxs)("div",{id:"compass-coordinates",children:[(0,h.jsx)("span",{id:"compass-coordinates-latitude",className:"show-unlit","data-unlit":v.ro(r()),children:r()}),(0,h.jsx)("span",{id:"compass-coordinates-longitude",className:"show-unlit","data-unlit":v.ro(s()),children:s()})]}),(0,h.jsxs)("div",{id:"compass-compass",style:{height:a(),width:a()},children:[(0,h.jsx)("div",{id:"compass-directions",style:{transform:"rotate(".concat((null===i||void 0===i?void 0:i.heading)||0,"deg)")}}),(0,h.jsx)("div",{id:"compass-tilt",style:{transform:"rotate(".concat((null===i||void 0===i?void 0:i.tilt)||0,"deg)")}}),(0,h.jsx)("div",{id:"compass-tilt-value",children:"".concat(Math.round((null===i||void 0===i?void 0:i.tilt)||0),"\xb0")}),(0,h.jsx)("div",{id:"compass-climb",style:{backgroundPositionY:"".concat(79*-((null===i||void 0===i?void 0:i.climb)||0)/45+50,"%")}})]}),(0,h.jsxs)("div",{id:"compass-positioning",children:[(0,h.jsxs)("div",{id:"compass-altitude",className:"show-unlit","data-unlit":v.ro(c()),children:[c(),(0,h.jsx)("br",{})]}),(0,h.jsxs)("div",{id:"compass-speed",className:"show-unlit","data-unlit":v.ro(f()),children:[f(),(0,h.jsx)("br",{})]})]})]})}},7830:(e,t,o)=>{o.d(t,{Z:()=>d});var n=o(2791),i=o(2007),l=o.n(i),a=["color","size","title"];function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r.apply(this,arguments)}function s(e,t){if(null==e)return{};var o,n,i=function(e,t){if(null==e)return{};var o,n,i={},l=Object.keys(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||(i[o]=e[o]);return i}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)o=l[n],t.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(e,o)&&(i[o]=e[o])}return i}var c=(0,n.forwardRef)((function(e,t){var o=e.color,i=e.size,l=e.title,c=s(e,a);return n.createElement("svg",r({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:i,height:i,fill:o},c),l?n.createElement("title",null,l):null,n.createElement("path",{fillRule:"evenodd",d:"M3.1 11.2a.5.5 0 0 1 .4-.2H6a.5.5 0 0 1 0 1H3.75L1.5 15h13l-2.25-3H10a.5.5 0 0 1 0-1h2.5a.5.5 0 0 1 .4.2l3 4a.5.5 0 0 1-.4.8H.5a.5.5 0 0 1-.4-.8l3-4z"}),n.createElement("path",{fillRule:"evenodd",d:"M8 1a3 3 0 1 0 0 6 3 3 0 0 0 0-6zM4 4a4 4 0 1 1 4.5 3.969V13.5a.5.5 0 0 1-1 0V7.97A4 4 0 0 1 4 3.999z"}))}));c.propTypes={color:l().string,size:l().oneOfType([l().string,l().number]),title:l().string},c.defaultProps={color:"currentColor",size:"1em",title:null};const d=c}}]);
//# sourceMappingURL=919.4d32c3ab.chunk.js.map